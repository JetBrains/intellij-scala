import scala.language.dynamics

object Foo extends Dynamic:
  def selectDynamic(name: String): Foo.type = this

object Test:
  def test(): Foo.type =
    Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
-----
ScalaFile
  ScImportStatement
    PsiElement(import)('import')
    PsiWhiteSpace(' ')
    ImportExpression
      CodeReferenceElement: scala.language.dynamics
        CodeReferenceElement: scala.language
          CodeReferenceElement: scala
            PsiElement(identifier)('scala')
          PsiElement(.)('.')
          PsiElement(identifier)('language')
        PsiElement(.)('.')
        PsiElement(identifier)('dynamics')
  PsiWhiteSpace('\n\n')
  ScObject: Foo
    AnnotationsList
      <empty list>
    Modifiers
      <empty list>
    PsiElement(object)('object')
    PsiWhiteSpace(' ')
    PsiElement(identifier)('Foo')
    PsiWhiteSpace(' ')
    ExtendsBlock
      PsiElement(extends)('extends')
      PsiWhiteSpace(' ')
      TemplateParents
        ConstructorInvocation
          SimpleType: Dynamic
            CodeReferenceElement: Dynamic
              PsiElement(identifier)('Dynamic')
      ScTemplateBody
        PsiElement(:)(':')
        PsiWhiteSpace('\n  ')
        ScFunctionDefinition: selectDynamic
          AnnotationsList
            <empty list>
          Modifiers
            <empty list>
          PsiElement(def)('def')
          PsiWhiteSpace(' ')
          PsiElement(identifier)('selectDynamic')
          Parameters
            ParametersClause
              PsiElement(()('(')
              Parameter: name
                AnnotationsList
                  <empty list>
                Modifiers
                  <empty list>
                PsiElement(identifier)('name')
                PsiElement(:)(':')
                PsiWhiteSpace(' ')
                ParameterType
                  SimpleType: String
                    CodeReferenceElement: String
                      PsiElement(identifier)('String')
              PsiElement())(')')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          SimpleType: Foo.type
            CodeReferenceElement: Foo
              PsiElement(identifier)('Foo')
            PsiElement(.)('.')
            PsiElement(type)('type')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace(' ')
          ThisReference
            PsiElement(this)('this')
  PsiWhiteSpace('\n\n')
  ScObject: Test
    AnnotationsList
      <empty list>
    Modifiers
      <empty list>
    PsiElement(object)('object')
    PsiWhiteSpace(' ')
    PsiElement(identifier)('Test')
    ExtendsBlock
      ScTemplateBody
        PsiElement(:)(':')
        PsiWhiteSpace('\n  ')
        ScFunctionDefinition: test
          AnnotationsList
            <empty list>
          Modifiers
            <empty list>
          PsiElement(def)('def')
          PsiWhiteSpace(' ')
          PsiElement(identifier)('test')
          Parameters
            ParametersClause
              PsiElement(()('(')
              PsiElement())(')')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          SimpleType: Foo.type
            CodeReferenceElement: Foo
              PsiElement(identifier)('Foo')
            PsiElement(.)('.')
            PsiElement(type)('type')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace('\n    ')
          ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
            ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
              ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                  ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                    ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                      ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                        ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                          ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                            ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                              ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                  ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                    ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                      ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                        ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                          ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                            ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                              ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                  ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                    ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                      ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                        ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                          ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                            ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                              ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                  ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                    ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                      ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                        ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                          ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                            ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                              ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                                ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                                  ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                                    ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
      .xxx
                                                                                      ReferenceExpression: Foo.xxx
      .xxx
      .xxx
      .xxx
                                                                                        ReferenceExpression: Foo.xxx
      .xxx
      .xxx
                                                                                          ReferenceExpression: Foo.xxx
      .xxx
                                                                                            ReferenceExpression: Foo.xxx
                                                                                              ReferenceExpression: Foo
                                                                                                PsiElement(identifier)('Foo')
                                                                                              PsiElement(.)('.')
                                                                                              PsiElement(identifier)('xxx')
                                                                                            PsiWhiteSpace('\n      ')
                                                                                            PsiElement(.)('.')
                                                                                            PsiElement(identifier)('xxx')
                                                                                          PsiWhiteSpace('\n      ')
                                                                                          PsiElement(.)('.')
                                                                                          PsiElement(identifier)('xxx')
                                                                                        PsiWhiteSpace('\n      ')
                                                                                        PsiElement(.)('.')
                                                                                        PsiElement(identifier)('xxx')
                                                                                      PsiWhiteSpace('\n      ')
                                                                                      PsiElement(.)('.')
                                                                                      PsiElement(identifier)('xxx')
                                                                                    PsiWhiteSpace('\n      ')
                                                                                    PsiElement(.)('.')
                                                                                    PsiElement(identifier)('xxx')
                                                                                  PsiWhiteSpace('\n      ')
                                                                                  PsiElement(.)('.')
                                                                                  PsiElement(identifier)('xxx')
                                                                                PsiWhiteSpace('\n      ')
                                                                                PsiElement(.)('.')
                                                                                PsiElement(identifier)('xxx')
                                                                              PsiWhiteSpace('\n      ')
                                                                              PsiElement(.)('.')
                                                                              PsiElement(identifier)('xxx')
                                                                            PsiWhiteSpace('\n      ')
                                                                            PsiElement(.)('.')
                                                                            PsiElement(identifier)('xxx')
                                                                          PsiWhiteSpace('\n      ')
                                                                          PsiElement(.)('.')
                                                                          PsiElement(identifier)('xxx')
                                                                        PsiWhiteSpace('\n      ')
                                                                        PsiElement(.)('.')
                                                                        PsiElement(identifier)('xxx')
                                                                      PsiWhiteSpace('\n      ')
                                                                      PsiElement(.)('.')
                                                                      PsiElement(identifier)('xxx')
                                                                    PsiWhiteSpace('\n      ')
                                                                    PsiElement(.)('.')
                                                                    PsiElement(identifier)('xxx')
                                                                  PsiWhiteSpace('\n      ')
                                                                  PsiElement(.)('.')
                                                                  PsiElement(identifier)('xxx')
                                                                PsiWhiteSpace('\n      ')
                                                                PsiElement(.)('.')
                                                                PsiElement(identifier)('xxx')
                                                              PsiWhiteSpace('\n      ')
                                                              PsiElement(.)('.')
                                                              PsiElement(identifier)('xxx')
                                                            PsiWhiteSpace('\n      ')
                                                            PsiElement(.)('.')
                                                            PsiElement(identifier)('xxx')
                                                          PsiWhiteSpace('\n      ')
                                                          PsiElement(.)('.')
                                                          PsiElement(identifier)('xxx')
                                                        PsiWhiteSpace('\n      ')
                                                        PsiElement(.)('.')
                                                        PsiElement(identifier)('xxx')
                                                      PsiWhiteSpace('\n      ')
                                                      PsiElement(.)('.')
                                                      PsiElement(identifier)('xxx')
                                                    PsiWhiteSpace('\n      ')
                                                    PsiElement(.)('.')
                                                    PsiElement(identifier)('xxx')
                                                  PsiWhiteSpace('\n      ')
                                                  PsiElement(.)('.')
                                                  PsiElement(identifier)('xxx')
                                                PsiWhiteSpace('\n      ')
                                                PsiElement(.)('.')
                                                PsiElement(identifier)('xxx')
                                              PsiWhiteSpace('\n      ')
                                              PsiElement(.)('.')
                                              PsiElement(identifier)('xxx')
                                            PsiWhiteSpace('\n      ')
                                            PsiElement(.)('.')
                                            PsiElement(identifier)('xxx')
                                          PsiWhiteSpace('\n      ')
                                          PsiElement(.)('.')
                                          PsiElement(identifier)('xxx')
                                        PsiWhiteSpace('\n      ')
                                        PsiElement(.)('.')
                                        PsiElement(identifier)('xxx')
                                      PsiWhiteSpace('\n      ')
                                      PsiElement(.)('.')
                                      PsiElement(identifier)('xxx')
                                    PsiWhiteSpace('\n      ')
                                    PsiElement(.)('.')
                                    PsiElement(identifier)('xxx')
                                  PsiWhiteSpace('\n      ')
                                  PsiElement(.)('.')
                                  PsiElement(identifier)('xxx')
                                PsiWhiteSpace('\n      ')
                                PsiElement(.)('.')
                                PsiElement(identifier)('xxx')
                              PsiWhiteSpace('\n      ')
                              PsiElement(.)('.')
                              PsiElement(identifier)('xxx')
                            PsiWhiteSpace('\n      ')
                            PsiElement(.)('.')
                            PsiElement(identifier)('xxx')
                          PsiWhiteSpace('\n      ')
                          PsiElement(.)('.')
                          PsiElement(identifier)('xxx')
                        PsiWhiteSpace('\n      ')
                        PsiElement(.)('.')
                        PsiElement(identifier)('xxx')
                      PsiWhiteSpace('\n      ')
                      PsiElement(.)('.')
                      PsiElement(identifier)('xxx')
                    PsiWhiteSpace('\n      ')
                    PsiElement(.)('.')
                    PsiElement(identifier)('xxx')
                  PsiWhiteSpace('\n      ')
                  PsiElement(.)('.')
                  PsiElement(identifier)('xxx')
                PsiWhiteSpace('\n      ')
                PsiElement(.)('.')
                PsiElement(identifier)('xxx')
              PsiWhiteSpace('\n      ')
              PsiElement(.)('.')
              PsiElement(identifier)('xxx')
            PsiWhiteSpace('\n      ')
            PsiElement(.)('.')
            PsiElement(identifier)('xxx')
